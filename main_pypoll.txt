import os

import csv

# Assign file location with the pathlib library

csv_file_path = os.path.join(r"C:\Users\Okyere\RUT-SOM-VIRT-DATA-PT-03-2021-U-C\02-Homework\03-Python\Instructions\PyPoll\Resources\election_data.csv")

# Declare Variables 
votes = []
county=[]
candidates=[]
khan_votes = []
correy_votes = []
li_votes = []
otooley_votes = []
total_votes=[]

# Open csv in default read mode with context manager
with open(csv_file_path,newline="", encoding='utf-8') as elections:


    # Store data under the csvreader variable
    csvreader = csv.reader(elections,delimiter=",") 

    # Skip the header so we iterate through the actual values
    header = next(csvreader)     

    # Iterate through each row in the csv
    #@@ -43,14 +42,12 @@
    #candidates = ["Khan", "Correy", "Li","O'Tooley"]
    #votes = [khan_votes, correy_votes,li_votes,otooley_votes]\

    for row in csvreader:
        votes.append(int(row[0]))
        county.append(row[1])
        candidates.append(row[2])
    # counting votes 
    total_votes = (len(votes))
    print(total_votes)

    # We zip them together the list of candidate(key) and the total votes(value)
    # Return the winner using a max function of the dictionary 
    dict_candidates_and_votes = dict(zip(candidates,votes))
    key = max(dict_candidates_and_votes, key=dict_candidates_and_votes.get)

    #  Percenatges 
    khan_percent = round( ((khan_votes/total_votes) *100),2)
    correy_percent = round(((correy_votes/total_votes) * 100),2)
    li_percent = round (((li_votes/total_votes)* 100),2)
    otooley_percent= round(((otooley_votes/total_votes)*100),2)
  #  @@ -69,14 +66,13 @@
    print(f"Winner: {key}")
    print(f"----------------------------")

    #Output files
    # Assign output file location and with the pathlib library
    output_file = Path("python-challenge", "PyPoll", "Election_Results_Summary.txt")
    with open(output_file,"w") as file:



    # Write methods to print to Elections_Results_Summary 
        file.write(f"Election Results")
        file.write("\n")
        file.write(f"----------------------------")